!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=28)}([function(t,e){t.exports=THREE},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){var n=r(9),i=r(20);t.exports=r(4)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(16)("wks"),i=r(8),o=r(1).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=n},function(t,e,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,s,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(o(r=this._events[t]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),s=(l=r.slice()).length,u=0;u<s;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(t,e){var s;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},r.prototype.removeListener=function(t,e){var r,o,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(r=this._events[t]).length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(a=s;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){o=a;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){var r=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(10),i=r(32),o=r(33),s=Object.defineProperty;e.f=r(4)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(11);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e,r){var n=r(35),i=r(21);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(1),i=r(2),o=r(5),s=r(8)("src"),a=Function.toString,u=(""+a).split("toString");r(7).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,r,a){var l="function"==typeof r;l&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(l&&(o(r,s)||i(r,s,t[e]?""+t[e]:u.join(String(e)))),t===n?t[e]=r:a?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e,r){var n=r(16)("keys"),i=r(8);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(7),i=r(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(17)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(11),i=r(1).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(44),i=r(24);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(9).f,i=r(5),o=r(3)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){t.exports=r.p+"media/cha.0ac848d6.mp3"},function(t,e,r){t.exports=r.p+"media/9s.5a2ecba7.jpg"},function(t,e,r){t.exports=r(51)},function(t,e,r){for(var n=r(30),i=r(22),o=r(14),s=r(1),a=r(2),u=r(12),l=r(3),c=l("iterator"),h=l("toStringTag"),f=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),m=0;m<p.length;m++){var v,g=p[m],y=d[g],x=s[g],b=x&&x.prototype;if(b&&(b[c]||a(b,c,f),b[h]||a(b,h,g),u[g]=f,y))for(v in n)b[v]||o(b,v,n[v],!0)}},function(t,e,r){"use strict";var n=r(31),i=r(34),o=r(12),s=r(13);t.exports=r(37)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n=r(3)("unscopables"),i=Array.prototype;void 0==i[n]&&r(2)(i,n,{}),t.exports=function(t){i[n][t]=!0}},function(t,e,r){t.exports=!r(4)&&!r(18)(function(){return 7!=Object.defineProperty(r(19)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(11);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(36);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){"use strict";var n=r(17),i=r(38),o=r(14),s=r(2),a=r(12),u=r(41),l=r(25),c=r(49),h=r(3)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,r,p,m,v,g){u(r,e,p);var y,x,b,w=function(t){if(!f&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},S=e+" Iterator",T="values"==m,M=!1,_=t.prototype,P=_[h]||_["@@iterator"]||m&&_[m],C=P||w(m),L=m?T?w("entries"):C:void 0,B="Array"==e&&_.entries||P;if(B&&(b=c(B.call(new t)))!==Object.prototype&&b.next&&(l(b,S,!0),n||"function"==typeof b[h]||s(b,h,d)),T&&P&&"values"!==P.name&&(M=!0,C=function(){return P.call(this)}),n&&!g||!f&&!M&&_[h]||s(_,h,C),a[e]=C,a[S]=d,m)if(y={values:T?C:w("values"),keys:v?C:w("keys"),entries:L},g)for(x in y)x in _||o(_,x,y[x]);else i(i.P+i.F*(f||M),e,y);return y}},function(t,e,r){var n=r(1),i=r(7),o=r(2),s=r(14),a=r(39),u=function(t,e,r){var l,c,h,f,d=t&u.F,p=t&u.G,m=t&u.S,v=t&u.P,g=t&u.B,y=p?n:m?n[e]||(n[e]={}):(n[e]||{}).prototype,x=p?i:i[e]||(i[e]={}),b=x.prototype||(x.prototype={});for(l in p&&(r=e),r)h=((c=!d&&y&&void 0!==y[l])?y:r)[l],f=g&&c?a(h,n):v&&"function"==typeof h?a(Function.call,h):h,y&&s(y,l,h,t&u.U),x[l]!=h&&o(x,l,f),v&&b[l]!=h&&(b[l]=h)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,r){var n=r(40);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){"use strict";var n=r(42),i=r(20),o=r(25),s={};r(2)(s,r(3)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(s,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,r){var n=r(10),i=r(43),o=r(24),s=r(15)("IE_PROTO"),a=function(){},u=function(){var t,e=r(19)("iframe"),n=o.length;for(e.style.display="none",r(48).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[o[n]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(a.prototype=n(t),r=new a,a.prototype=null,r[s]=t):r=u(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(9),i=r(10),o=r(22);t.exports=r(4)?Object.defineProperties:function(t,e){i(t);for(var r,s=o(e),a=s.length,u=0;a>u;)n.f(t,r=s[u++],e[r]);return t}},function(t,e,r){var n=r(5),i=r(13),o=r(45)(!1),s=r(15)("IE_PROTO");t.exports=function(t,e){var r,a=i(t),u=0,l=[];for(r in a)r!=s&&n(a,r)&&l.push(r);for(;e.length>u;)n(a,r=e[u++])&&(~o(l,r)||l.push(r));return l}},function(t,e,r){var n=r(13),i=r(46),o=r(47);t.exports=function(t){return function(e,r,s){var a,u=n(e),l=i(u.length),c=o(s,l);if(t&&r!=r){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}}},function(t,e,r){var n=r(23),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(23),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(1).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(5),i=r(50),o=r(15)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,r){var n=r(21);t.exports=function(t){return Object(n(t))}},function(t,e,r){"use strict";r.r(e);r(29);function n(t,e){return t+(Math.random()-.5)*e}var i=r(0),o=function(){function t(t,e,r,o,s,a,u,l,c){var h,f;this.rotate=360*Math.random(),this.id=Math.random(),this.panelOpacity=.1,this.rotateSpeed=s,this.angle=r,this.speed=o,this.center=e,this.onDelete=c,this.distance=l.startShow,this.showDistance=l,this.panelMaterial=(new i.MeshBasicMaterial).copy(a),this.panelMaterial.transparent=!0,this.lineMaterial=(new i.LineBasicMaterial).copy(u),this.lineMaterial.transparent=!0;var d=new i.Geometry,p=new i.Geometry,m=[new i.Vector3(n(t,t/2),n(t,t/2),0),new i.Vector3(-1*n(t,t/2),n(t,t/2),0),new i.Vector3(-1*n(t,t/2),-1*n(t,t/2),0)];(h=d.vertices).push.apply(h,m),(f=p.vertices).push.apply(f,m.concat([m[0]])),d.faces.push(new i.Face3(0,1,2)),d.computeFaceNormals(),d.computeVertexNormals(),this.line=new i.Line(p,this.lineMaterial),this.mesh=new i.Mesh(d,this.panelMaterial),this.group=new i.Group,this.translateOnAxis(this.translate(this.distance),1),this.group.add(this.line),this.group.add(this.mesh),this.rotateZ(this.rotate),this.updatePosition(0)}return t.prototype.rotateZ=function(t){this.mesh.geometry.rotateZ(t),this.line.geometry.rotateZ(t)},t.prototype.translate=function(t){var e=Math.cos(this.angle*Math.PI/180)*t,r=Math.sin(this.angle*Math.PI/180)*t;return new i.Vector3(e,r,0)},t.prototype.translateOnAxis=function(t,e){this.group.translateOnAxis(t,e)},t.prototype.updatePosition=function(t){this.translateOnAxis(this.translate(t*this.speed),1),this.distance+=t*this.speed,this.rotateZ(this.rotateSpeed*t),this.panelMaterial.opacity=this.opacity(this.distance,this.showDistance)*this.panelOpacity,this.lineMaterial.opacity=this.opacity(this.distance,this.showDistance),this.distance>this.showDistance.endHide&&this.delete()},t.prototype.delete=function(){this.onDelete(this),this.mesh.geometry.dispose(),this.line.geometry.dispose()},t.prototype.opacity=function(t,e){return this.distance<e.endShow?(this.distance-e.startShow)/(e.endShow-e.startShow):this.distance>e.startHide?(e.endHide-this.distance)/(e.endHide-e.startHide):1},t.prototype.transition=function(t){this.updatePosition(t)},t}();function s(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);for(var i=-1,o=Math.max(Math.ceil((e-t)/r),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var a=function(){function t(t,e,r){this._range=0,this.baseRange=t,this.angle=e,this.center=r}return Object.defineProperty(t.prototype,"positionA",{get:function(){var t=this._range+this.baseRange,e=Math.cos(this.angle*Math.PI/180)*t,r=Math.sin(this.angle*Math.PI/180)*t;return new i.Vector2(this.center.x+e,this.center.y+r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionB",{get:function(){var t=-1*this._range+this.baseRange,e=Math.cos(this.angle*Math.PI/180)*t,r=Math.sin(this.angle*Math.PI/180)*t;return new i.Vector2(this.center.x+e,this.center.y+r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strength",{set:function(t){var e=t,r=e,n=Math.max(e-r,0);n>this._range&&(this._range=n)},enumerable:!0,configurable:!0}),t.prototype.transition=function(t){this._range=Math.max(this._range-t*this._range*5,0)},t}(),u=r(6),l=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),c=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;return r.listener=new i.AudioListener,r.sound=new i.Audio(r.listener),r.audioLoader=new i.AudioLoader,r.analyser=new i.AudioAnalyser(r.sound,e.fftsize||256),r.frequencyBinCount=r.analyser.analyser.frequencyBinCount,r}return l(e,t),e.prototype.load=function(t){var e=this,r=t.src,n=t.onLoad,i=void 0===n?function(t){}:n,o=t.onPrgress,s=void 0===o?function(t){}:o,a=t.onError,u=void 0===a?function(){}:a;this.audioLoader.load(r,function(t){return e.sound.setBuffer(t),e.sound.setLoop(!0),e.sound.play(),i(t)},s,u)},e.prototype.setVolume=function(t){this.sound.setVolume(t)},e.prototype.getFrequencyData=function(){return this.analyser.getFrequencyData()},e}(u.EventEmitter),h=Object.assign(i,{});h.LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new h.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},h.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},h.EffectComposer=function(t,e){if(this.renderer=t,void 0===e){var r={minFilter:h.LinearFilter,magFilter:h.LinearFilter,format:h.RGBAFormat,stencilBuffer:!1},n=t.getSize();(e=new h.WebGLRenderTarget(n.width,n.height,r)).texture.name="EffectComposer.rt1"}this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===h.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new h.ShaderPass(h.CopyShader)},Object.assign(h.EffectComposer.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t);var e=this.renderer.getSize();t.setSize(e.width,e.height)},insertPass:function(t,e){this.passes.splice(e,0,t)},render:function(t){var e,r,n=!1,i=this.passes.length;for(r=0;r<i;r++)if(!1!==(e=this.passes[r]).enabled){if(e.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),e.needsSwap){if(n){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==h.MaskPass&&(e instanceof h.MaskPass?n=!0:e instanceof h.ClearMaskPass&&(n=!1))}},reset:function(t){if(void 0===t){var e=this.renderer.getSize();(t=this.renderTarget1.clone()).setSize(e.width,e.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this.renderTarget1.setSize(t,e),this.renderTarget2.setSize(t,e);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(t,e)}}),h.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(h.Pass.prototype,{setSize:function(t,e){},render:function(t,e,r,n,i){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),h.RenderPass=function(t,e,r,n,i){h.Pass.call(this),this.scene=t,this.camera=e,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},h.RenderPass.prototype=Object.assign(Object.create(h.Pass.prototype),{constructor:h.RenderPass,render:function(t,e,r,n,i){var o,s,a=t.autoClear;t.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(o=t.getClearColor().getHex(),s=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),this.clearColor&&t.setClearColor(o,s),this.scene.overrideMaterial=null,t.autoClear=a}}),h.ShaderPass=function(t,e){h.Pass.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof h.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=h.UniformsUtils.clone(t.uniforms),this.material=new h.ShaderMaterial({defines:t.defines||{},uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.camera=new h.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new h.Scene,this.quad=new h.Mesh(new h.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},h.ShaderPass.prototype=Object.assign(Object.create(h.Pass.prototype),{constructor:h.ShaderPass,render:function(t,e,r,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.quad.material=this.material,this.renderToScreen?t.render(this.scene,this.camera):t.render(this.scene,this.camera,e,this.clear)}}),h.UnrealBloomPass=function(t,e,r,n){h.Pass.call(this),this.strength=void 0!==e?e:1,this.radius=r,this.threshold=n,this.resolution=void 0!==t?new h.Vector2(t.x,t.y):new h.Vector2(256,256);var i={minFilter:h.LinearFilter,magFilter:h.LinearFilter,format:h.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new h.WebGLRenderTarget(o,s,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var a=0;a<this.nMips;a++){var u;(u=new h.WebGLRenderTarget(o,s,i)).texture.name="UnrealBloomPass.h"+a,u.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(u),(u=new h.WebGLRenderTarget(o,s,i)).texture.name="UnrealBloomPass.v"+a,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),o=Math.round(o/2),s=Math.round(s/2)}void 0===h.LuminosityHighPassShader&&console.error("THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader");var l=h.LuminosityHighPassShader;this.highPassUniforms=h.UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=n,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new h.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var c=[3,5,7,9,11];for(o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2),a=0;a<this.nMips;a++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[a])),this.separableBlurMaterials[a].uniforms.texSize.value=new h.Vector2(o,s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new h.Vector3(1,1,1),new h.Vector3(1,1,1),new h.Vector3(1,1,1),new h.Vector3(1,1,1),new h.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===h.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var f=h.CopyShader;this.copyUniforms=h.UniformsUtils.clone(f.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new h.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,blending:h.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new h.Color,this.oldClearAlpha=1,this.camera=new h.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new h.Scene,this.quad=new h.Mesh(new h.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},h.UnrealBloomPass.prototype=Object.assign(Object.create(h.Pass.prototype),{constructor:h.UnrealBloomPass,dispose:function(){for(var t=0;t<this.renderTargetsHorizontal.length();t++)this.renderTargetsHorizontal[t].dispose();for(t=0;t<this.renderTargetsVertical.length();t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,e){var r=Math.round(t/2),n=Math.round(e/2);this.renderTargetBright.setSize(r,n);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(r,n),this.renderTargetsVertical[i].setSize(r,n),this.separableBlurMaterials[i].uniforms.texSize.value=new h.Vector2(r,n),r=Math.round(r/2),n=Math.round(n/2)},render:function(t,e,r,n,i){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!1,t.setClearColor(new h.Color(0,0,0),0),i&&t.context.disable(t.context.STENCIL_TEST),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,t.render(this.scene,this.camera,this.renderTargetBright,!0);for(var s=this.renderTargetBright,a=0;a<this.nMips;a++)this.quad.material=this.separableBlurMaterials[a],this.separableBlurMaterials[a].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[a].uniforms.direction.value=h.UnrealBloomPass.BlurDirectionX,t.render(this.scene,this.camera,this.renderTargetsHorizontal[a],!0),this.separableBlurMaterials[a].uniforms.colorTexture.value=this.renderTargetsHorizontal[a].texture,this.separableBlurMaterials[a].uniforms.direction.value=h.UnrealBloomPass.BlurDirectionY,t.render(this.scene,this.camera,this.renderTargetsVertical[a],!0),s=this.renderTargetsVertical[a];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&t.context.enable(t.context.STENCIL_TEST),t.render(this.scene,this.camera,r,!1),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o},getSeperableBlurMaterial:function(t){return new h.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new h.Vector2(.5,.5)},direction:{value:new h.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(t){return new h.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),h.UnrealBloomPass.BlurDirectionX=new h.Vector2(1,0),h.UnrealBloomPass.BlurDirectionY=new h.Vector2(0,1);var f=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;r.scale=1,r.Triangles=[];var n=e.width,i=void 0===n?window.innerWidth:n,o=e.height,u=void 0===o?window.innerHeight:o,l=e.subdivisionSize,f=void 0===l?1024:l,d=e.cutFront,p=void 0===d?0:d,m=e.cutEnd,v=void 0===m?0:m;r.cutFront=p,r.cutEnd=v;var g=new h.WebGLRenderer({canvas:e.view,alpha:!0,antialias:!0});g.setSize(i,u);var y=new h.PerspectiveCamera(45,i/u,1,500);y.position.set(0,0,100),y.lookAt(new h.Vector3(0,0,0));var x=new h.Scene;r.composer=new h.EffectComposer(g),r.composer.setSize(i,u);var b=new h.RenderPass(x,y);r.composer.addPass(b),r.bloomPass=new h.UnrealBloomPass(new h.Vector2(window.innerWidth,window.innerHeight),1.5,.2,0),r.composer.addPass(r.bloomPass);var w=new h.ShaderPass(h.CopyShader);w.renderToScreen=!0,r.composer.addPass(w),r.scene=x,r.camera=y,r.audio=new c({fftsize:f});var S=r.loadAudio(f).frequencyBinCount,T=new h.LineBasicMaterial({color:240116}),M=S-v-p;return r.nodes=s(0,M).map(function(t){return new a(20,(t/M*360+45)%360,new h.Vector2(0,0))}),r.lineA=new h.Line((new h.BufferGeometry).addAttribute("position",r.renderGeometries(r.nodes.map(function(t){return t.positionA})).setDynamic(!0)),T),r.lineB=new h.Line((new h.BufferGeometry).addAttribute("position",r.renderGeometries(r.nodes.map(function(t){return t.positionB})).setDynamic(!0)),T),r.lines=s(0,M).map(function(t){return new h.Line((new h.BufferGeometry).addAttribute("position",r.renderGeometries([r.nodes[t].positionA,r.nodes[t].positionB]).setDynamic(!0)),T)}),r.lineGroup=r.loadLine(),r.TriangleGroup=r.loadTriangle(),r.scene.add(r.TriangleGroup),r.scene.add(r.lineGroup),r.renderer=g,r.clock=new h.Clock,r.render(),r.resize(i,u),r}return f(e,t),e.prototype.loadGui=function(){var t=this,e={projection:"normal",background:!1,exposure:1,bloomStrength:1.5,bloomThreshold:.2,bloomRadius:0},r=new window.dat.GUI;r.add(e,"exposure",.1,2),r.add(e,"bloomThreshold",0,1).onChange(function(e){t.bloomPass.threshold=Number(e)}),r.add(e,"bloomStrength",0,3).onChange(function(e){t.bloomPass.strength=Number(e)}),r.add(e,"bloomRadius",0,1).onChange(function(e){t.bloomPass.radius=Number(e)}),r.open()},e.prototype.resize=function(t,e){this.camera.aspect=t/e,this.camera.fov=t<=425?70:45,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e),this.composer.setSize(t,e)},e.prototype.loadLine=function(){var t=new h.Group;return t.add(this.lineB),t.add(this.lineA),this.lines.forEach(function(e){return t.add(e)}),t},e.prototype.loadAudio=function(t){return this.camera.add(this.audio.listener),this.audio},e.prototype.loadTriangle=function(){var t=new h.Group,e=new h.MeshBasicMaterial({color:240116}),r=new h.LineBasicMaterial({color:240116});return setInterval(this.addTriangle.bind(this,e,r),500),t},e.prototype.addTriangle=function(t,e){var r=this;void 0===t&&(t=new h.MeshBasicMaterial({color:240116})),void 0===e&&(e=new h.LineBasicMaterial({color:240116}));var n=this.makeTriangle(t,e,function(t){r.Triangles=r.Triangles.filter(function(e){return e!==t}),r.TriangleGroup.remove(t.group)});this.TriangleGroup.add(n.group),this.Triangles.push(n)},e.prototype.makeTriangle=function(t,e,r){return void 0===t&&(t=new h.MeshBasicMaterial({color:240116})),void 0===e&&(e=new h.LineBasicMaterial({color:240116})),new o(2,new h.Vector3(0,0,0),360*Math.random(),n(5,1),n(.1,.02),t,e,{startShow:15,endShow:30,startHide:60,endHide:70},r)},e.prototype.renderGeometries=function(t){var e=[];return(t=t.concat(t[0])).forEach(function(t){e.push(t.x,t.y,0)}),new h.BufferAttribute(new Float32Array(e),3)},e.prototype.updateGeometries=function(){var t=this;if(this.nodes){this.lineGroup.scale.set(this.scale,this.scale,this.scale);var e=this.lineA.geometry.getAttribute("position"),r=this.lineB.geometry.getAttribute("position"),n=this.nodes.map(function(t){return[t.positionA,t.positionB]});n.forEach(function(n,i){e.set([n[0].x,n[0].y],3*i),r.set([n[1].x,n[1].y],3*i);var o=t.lines[i].geometry.getAttribute("position");o.set([n[0].x,n[0].y,0,n[1].x,n[1].y,0],0),o.needsUpdate=!0}),e.set([e.array[0],e.array[1]],3*n.length),r.set([r.array[0],r.array[1]],3*n.length),e.needsUpdate=!0,r.needsUpdate=!0}},e.prototype.render=function(){this.composer.render();var t=this.audio.getFrequencyData(),e=this.clock.getDelta(),r=t.slice(this.cutFront,t.length-this.cutEnd);this.nodes.forEach(function(t,n,i){t.strength=.1*r[n%i.length],t.transition(e)}),this.scale=1+t[Math.ceil(.05*t.length)]/1e3,this.updateGeometries(),this.Triangles.forEach(function(t){return t.transition(e)}),requestAnimationFrame(this.render.bind(this))},e}(u.EventEmitter),p=r(26),m=r.n(p),v=r(27),g=r.n(v),y=new d({view:document.getElementById("app"),subdivisionSize:1024,cutEnd:256});y.audio.load({src:m.a,onPrgress:function(t){console.log(t.loaded/t.total*100+"% loaded")}}),y.audio.setVolume(.5),window.addEventListener("resize",function(){y.resize(window.innerWidth,window.innerHeight)});var x=document.getElementById("bg");x&&(x.style.backgroundImage="url('"+g.a+"')")}]);
//# sourceMappingURL=example.f814ea9f.js.map